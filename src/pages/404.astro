---
import Layout from "../layouts/Layout.astro";
---

<Layout title="404 | Page Not Found">
  <section class="min-h-screen flex items-center justify-center px-8 relative overflow-hidden">
    <!-- Animated background shapes -->
    <div class="absolute inset-0 pointer-events-none">
      <div class="shape-1 absolute top-1/4 left-1/4 w-64 h-64 rounded-full bg-accent/5 blur-3xl"></div>
      <div class="shape-2 absolute bottom-1/4 right-1/4 w-96 h-96 rounded-full bg-accent/10 blur-3xl"></div>
      <div class="shape-3 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] rounded-full border border-text-muted/10"></div>
      <div class="shape-4 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] rounded-full border border-text-muted/5"></div>
    </div>

    <div class="relative z-10 text-center max-w-3xl mx-auto">
      <!-- Glitch 404 -->
      <div class="relative mb-8">
        <h1 class="error-number font-serif text-[12rem] md:text-[20rem] lg:text-[28rem] font-light leading-none text-transparent bg-clip-text bg-gradient-to-b from-text to-text-muted/30 select-none" data-text="404">
          404
        </h1>
        <div class="glitch-layers absolute inset-0 pointer-events-none">
          <span class="glitch-layer font-serif text-[12rem] md:text-[20rem] lg:text-[28rem] font-light leading-none text-accent/30 absolute inset-0 flex items-center justify-center" aria-hidden="true">404</span>
        </div>
      </div>

      <!-- Text content -->
      <div class="space-y-6">
        <div class="overflow-hidden">
          <p class="error-line text-accent text-sm tracking-[0.3em] uppercase translate-y-full">Lost in the gallery</p>
        </div>
        <div class="overflow-hidden">
          <h2 class="error-line font-serif text-3xl md:text-5xl font-light translate-y-full">This page doesn't exist</h2>
        </div>
        <div class="overflow-hidden">
          <p class="error-line text-text-muted translate-y-full">The artwork you're looking for has wandered off. Let's get you back on track.</p>
        </div>
      </div>

      <!-- Navigation options -->
      <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mt-12">
        <a href="/" class="error-btn magnetic inline-flex items-center gap-3 bg-accent text-bg px-8 py-4 hover:bg-text transition-colors duration-500 opacity-0 translate-y-4" data-cursor="Home">
          <svg class="w-4 h-4 rotate-180" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M5 12h14M12 5l7 7-7 7" /></svg>
          <span class="text-sm tracking-[0.2em] uppercase">Back Home</span>
        </a>
        <a href="/portfolio" class="error-btn magnetic inline-flex items-center gap-3 border border-text/30 text-text px-8 py-4 hover:border-accent hover:text-accent transition-colors duration-500 opacity-0 translate-y-4" data-cursor="View">
          <span class="text-sm tracking-[0.2em] uppercase">View Portfolio</span>
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M5 12h14M12 5l7 7-7 7" /></svg>
        </a>
      </div>

      <!-- Decorative elements -->
      <div class="absolute -bottom-20 left-1/2 -translate-x-1/2 flex items-center gap-4 text-text-muted/30">
        <div class="w-16 h-px bg-current"></div>
        <span class="text-xs tracking-widest uppercase">Page not found</span>
        <div class="w-16 h-px bg-current"></div>
      </div>
    </div>

    <!-- Floating particles -->
    <div class="particle particle-1 absolute w-2 h-2 bg-accent/50 rounded-full"></div>
    <div class="particle particle-2 absolute w-1 h-1 bg-text-muted/50 rounded-full"></div>
    <div class="particle particle-3 absolute w-3 h-3 border border-accent/30 rounded-full"></div>
    <div class="particle particle-4 absolute w-1.5 h-1.5 bg-accent/30 rounded-full"></div>
    <div class="particle particle-5 absolute w-2 h-2 border border-text-muted/20 rounded-full"></div>
  </section>
</Layout>

<style>
  .glitch-layer {
    animation: glitch 3s infinite;
  }

  @keyframes glitch {
    0%, 90%, 100% {
      transform: translate(0);
      opacity: 0;
    }
    92% {
      transform: translate(-5px, 2px);
      opacity: 1;
    }
    94% {
      transform: translate(5px, -2px);
      opacity: 1;
    }
    96% {
      transform: translate(-3px, 1px);
      opacity: 0.8;
    }
    98% {
      transform: translate(3px, -1px);
      opacity: 0.5;
    }
  }

  .particle-1 { top: 20%; left: 15%; }
  .particle-2 { top: 70%; left: 20%; }
  .particle-3 { top: 30%; right: 20%; }
  .particle-4 { bottom: 30%; right: 15%; }
  .particle-5 { top: 60%; left: 10%; }
</style>

<script>
  import gsap from "gsap";

  // Animate shapes
  gsap.to(".shape-1", {
    x: 50,
    y: -30,
    duration: 8,
    repeat: -1,
    yoyo: true,
    ease: "sine.inOut"
  });

  gsap.to(".shape-2", {
    x: -40,
    y: 40,
    duration: 10,
    repeat: -1,
    yoyo: true,
    ease: "sine.inOut"
  });

  gsap.to(".shape-3", {
    rotate: 360,
    duration: 60,
    repeat: -1,
    ease: "none"
  });

  gsap.to(".shape-4", {
    rotate: -360,
    duration: 45,
    repeat: -1,
    ease: "none"
  });

  // Animate particles
  gsap.utils.toArray(".particle").forEach((particle: any, i) => {
    gsap.to(particle, {
      y: "random(-100, 100)",
      x: "random(-50, 50)",
      duration: "random(4, 8)",
      repeat: -1,
      yoyo: true,
      ease: "sine.inOut",
      delay: i * 0.3
    });
  });

  // Page load animation
  function init() {
    const tl = gsap.timeline();

    tl.from(".error-number", {
      scale: 0.8,
      opacity: 0,
      duration: 1.2,
      ease: "power3.out"
    })
    .to(".error-line", {
      y: 0,
      duration: 0.8,
      stagger: 0.1,
      ease: "power3.out"
    }, "-=0.6")
    .to(".error-btn", {
      opacity: 1,
      y: 0,
      duration: 0.6,
      stagger: 0.1,
      ease: "power3.out"
    }, "-=0.4");
  }

  // Run immediately or after preloader
  document.addEventListener("preloaderComplete", init);
  if (!document.getElementById("preloader") || document.getElementById("preloader")?.style.display === "none") {
    init();
  }
</script>
