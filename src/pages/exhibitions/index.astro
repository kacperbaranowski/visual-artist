---
import Layout from "../../layouts/Layout.astro";

const exhibitions = Array.from({ length: 20 }, (_, i) => ({
  id: i + 1,
  title: `Lorem Ipsum ${["Alpha", "Beta", "Gamma", "Delta", "Epsilon"][i % 5]}`,
  location: `Gallery ${["Lorem", "Ipsum", "Dolor", "Sit", "Amet"][i % 5]}, City`,
  date: `${2020 + Math.floor(i / 4)}`,
  month: ["Jan", "Mar", "May", "Jul", "Sep", "Nov"][i % 6],
  type: i % 3 === 0 ? "Solo" : "Group",
  image: `https://picsum.photos/seed/exhib${i}/600/400`,
}));
const years = [...new Set(exhibitions.map(e => e.date))].sort((a, b) => Number(b) - Number(a));
---

<Layout title="Exhibitions | Artist Name">
  <section class="min-h-screen pt-32 pb-24 px-8 md:px-16 lg:px-24">
    <div class="max-w-6xl mx-auto">
      <div class="mb-16 md:mb-24">
        <div class="overflow-hidden"><p class="page-line text-accent text-sm tracking-[0.3em] uppercase mb-4 translate-y-full">Exhibitions</p></div>
        <div class="overflow-hidden"><h1 class="page-line font-serif text-5xl md:text-7xl lg:text-8xl font-light translate-y-full">Exhibition History</h1></div>
        <div class="overflow-hidden mt-6"><p class="page-line text-text-muted max-w-2xl translate-y-full">A journey through galleries and spaces around the world.</p></div>
      </div>

      <div class="grid grid-cols-3 gap-8 mb-16 pb-16 border-b border-text-muted/20">
        <div class="stat-item opacity-0 translate-y-4 text-center"><p class="font-serif text-4xl md:text-6xl text-accent">50+</p><p class="text-text-muted text-sm mt-2">Exhibitions</p></div>
        <div class="stat-item opacity-0 translate-y-4 text-center"><p class="font-serif text-4xl md:text-6xl text-accent">12</p><p class="text-text-muted text-sm mt-2">Countries</p></div>
        <div class="stat-item opacity-0 translate-y-4 text-center"><p class="font-serif text-4xl md:text-6xl text-accent">10</p><p class="text-text-muted text-sm mt-2">Years</p></div>
      </div>

      {years.map(year => (
        <div class="year-section mb-16">
          <h2 class="font-serif text-2xl md:text-3xl font-light mb-8 text-accent">{year}</h2>
          <div class="space-y-0">
            {exhibitions.filter(e => e.date === year).map((exhibit, index) => (
              <article class="exhibit-item group border-t border-text-muted/20 py-6 md:py-8 opacity-0 translate-x-[-20px]">
                <a href={`/exhibitions/${exhibit.id}`} class="flex flex-col md:flex-row md:items-center gap-4 md:gap-8" data-cursor="View">
                  <span class="text-text-muted/50 text-sm font-mono w-16 flex-shrink-0">{exhibit.month}</span>
                  <div class="exhibit-image relative w-20 h-14 md:w-28 md:h-20 overflow-hidden opacity-0 scale-95 group-hover:opacity-100 group-hover:scale-100 transition-all duration-500 flex-shrink-0">
                    <img src={exhibit.image} alt={exhibit.title} class="w-full h-full object-cover" />
                  </div>
                  <div class="flex-1">
                    <h3 class="font-serif text-xl md:text-2xl font-light group-hover:text-accent transition-colors duration-300">{exhibit.title}</h3>
                    <p class="text-text-muted text-sm mt-1">{exhibit.location}</p>
                  </div>
                  <div class="flex items-center gap-4">
                    <span class="text-text-muted/50 text-xs uppercase tracking-wider">{exhibit.type}</span>
                    <div class="w-8 h-8 rounded-full border border-text/20 flex items-center justify-center group-hover:border-accent group-hover:bg-accent transition-all duration-500 opacity-0 group-hover:opacity-100">
                      <svg class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M5 12h14M12 5l7 7-7 7" /></svg>
                    </div>
                  </div>
                </a>
              </article>
            ))}
          </div>
        </div>
      ))}
    </div>
  </section>
</Layout>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("preloaderComplete", init);
  if (!document.getElementById("preloader") || document.getElementById("preloader")?.style.display === "none") init();

  function init() {
    gsap.to(".page-line", { y: 0, duration: 1, stagger: 0.1, ease: "power3.out" });
    gsap.to(".stat-item", { opacity: 1, y: 0, duration: 0.8, stagger: 0.1, ease: "power3.out", delay: 0.5 });
    gsap.utils.toArray<HTMLElement>(".exhibit-item").forEach((item) => {
      gsap.to(item, { opacity: 1, x: 0, duration: 0.6, ease: "power3.out", scrollTrigger: { trigger: item, start: "top 90%" } });
    });
  }
</script>
