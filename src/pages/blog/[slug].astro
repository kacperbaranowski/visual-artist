---
import Layout from "../../layouts/Layout.astro";

export function getStaticPaths() {
  const posts = [
    { slug: "lorem-ipsum-1", title: "Lorem ipsum dolor sit amet", date: "15 Jan 2024", category: "Lorem", image: "https://picsum.photos/seed/blog1/1200/800", content: "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p><h2>Consectetur Adipiscing</h2><p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p><p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.</p>" },
    { slug: "lorem-ipsum-2", title: "Sed do eiusmod tempor", date: "28 Dec 2023", category: "Ipsum", image: "https://picsum.photos/seed/blog2/1200/800", content: "<p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p><h2>Duis Aute Irure</h2><p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>" },
    { slug: "lorem-ipsum-3", title: "Ut enim ad minim veniam", date: "10 Nov 2023", category: "Dolor", image: "https://picsum.photos/seed/blog3/1200/800", content: "<p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p><h2>Excepteur Sint</h2><p>Sunt in culpa qui officia deserunt mollit anim id est laborum.</p>" },
    { slug: "lorem-ipsum-4", title: "Duis aute irure dolor", date: "22 Oct 2023", category: "Sit", image: "https://picsum.photos/seed/blog4/1200/800", content: "<p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>" },
    { slug: "lorem-ipsum-5", title: "Excepteur sint occaecat", date: "5 Sep 2023", category: "Amet", image: "https://picsum.photos/seed/blog5/1200/800", content: "<p>Sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet.</p>" },
  ];
  return posts.map((post) => ({ params: { slug: post.slug }, props: { post } }));
}

const { post } = Astro.props;
---

<Layout title={`${post.title} | Blog | Artist Name`}>
  <article class="min-h-screen pt-32 pb-24 px-8 md:px-16 lg:px-24">
    <div class="max-w-3xl mx-auto">
      <a href="/blog" class="inline-flex items-center gap-2 text-text-muted hover:text-accent transition-colors mb-12">
        <svg class="w-4 h-4 rotate-180" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M5 12h14M12 5l7 7-7 7" /></svg>
        <span class="text-sm tracking-wider uppercase">Back</span>
      </a>

      <header class="mb-12">
        <div class="overflow-hidden"><p class="page-line text-accent text-sm tracking-[0.3em] uppercase mb-4 translate-y-full">{post.category}</p></div>
        <div class="overflow-hidden"><h1 class="page-line font-serif text-4xl md:text-5xl lg:text-6xl font-light leading-tight translate-y-full">{post.title}</h1></div>
        <div class="overflow-hidden mt-6"><p class="page-line text-text-muted translate-y-full">{post.date}</p></div>
      </header>

      <div class="relative overflow-hidden aspect-[16/10] mb-12">
        <div class="post-reveal absolute inset-0 bg-bg z-10"></div>
        <img src={post.image} alt={post.title} class="w-full h-full object-cover" />
      </div>

      <div class="prose prose-invert prose-lg max-w-none" set:html={post.content} />
    </div>
  </article>
</Layout>

<style is:global>
  .prose h2 { font-family: var(--font-serif); font-weight: 300; font-size: 1.75rem; margin-top: 2.5rem; margin-bottom: 1rem; color: var(--color-text); }
  .prose p { color: var(--color-text-muted); line-height: 1.8; margin-bottom: 1.5rem; }
</style>

<script>
  import gsap from "gsap";
  document.addEventListener("preloaderComplete", init);
  if (!document.getElementById("preloader") || document.getElementById("preloader")?.style.display === "none") init();
  function init() {
    gsap.to(".page-line", { y: 0, duration: 1, stagger: 0.1, ease: "power3.out" });
    gsap.to(".post-reveal", { scaleY: 0, transformOrigin: "top", duration: 1.2, ease: "power3.inOut", delay: 0.3 });
  }
</script>
