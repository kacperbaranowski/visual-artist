---
import Layout from "../../layouts/Layout.astro";

const posts = [
  { id: 1, title: "Lorem ipsum dolor sit amet", excerpt: "Consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore.", date: "15 Jan 2024", category: "Lorem", image: "https://picsum.photos/seed/blog1/800/600", slug: "lorem-ipsum-1" },
  { id: 2, title: "Sed do eiusmod tempor", excerpt: "Ut enim ad minim veniam quis nostrud exercitation ullamco laboris.", date: "28 Dec 2023", category: "Ipsum", image: "https://picsum.photos/seed/blog2/800/600", slug: "lorem-ipsum-2" },
  { id: 3, title: "Ut enim ad minim veniam", excerpt: "Duis aute irure dolor in reprehenderit in voluptate velit esse cillum.", date: "10 Nov 2023", category: "Dolor", image: "https://picsum.photos/seed/blog3/800/600", slug: "lorem-ipsum-3" },
  { id: 4, title: "Duis aute irure dolor", excerpt: "Excepteur sint occaecat cupidatat non proident sunt in culpa qui officia.", date: "22 Oct 2023", category: "Sit", image: "https://picsum.photos/seed/blog4/800/600", slug: "lorem-ipsum-4" },
  { id: 5, title: "Excepteur sint occaecat", excerpt: "Sunt in culpa qui officia deserunt mollit anim id est laborum.", date: "5 Sep 2023", category: "Amet", image: "https://picsum.photos/seed/blog5/800/600", slug: "lorem-ipsum-5" },
];
---

<Layout title="Blog | Artist Name">
  <section class="min-h-screen pt-32 pb-24 px-8 md:px-16 lg:px-24">
    <div class="max-w-6xl mx-auto">
      <div class="mb-16 md:mb-24">
        <div class="overflow-hidden"><p class="page-line text-accent text-sm tracking-[0.3em] uppercase mb-4 translate-y-full">Blog</p></div>
        <div class="overflow-hidden"><h1 class="page-line font-serif text-5xl md:text-7xl lg:text-8xl font-light translate-y-full">Studio Journal</h1></div>
        <div class="overflow-hidden mt-6"><p class="page-line text-text-muted max-w-2xl translate-y-full">Thoughts on art, process, and the creative journey.</p></div>
      </div>

      <article class="featured-post mb-16 opacity-0 translate-y-8" data-cursor="Read">
        <a href={`/blog/${posts[0].slug}`} class="group block">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12">
            <div class="relative overflow-hidden aspect-[4/3]">
              <div class="featured-reveal absolute inset-0 bg-bg z-10"></div>
              <img src={posts[0].image} alt={posts[0].title} class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" />
            </div>
            <div class="flex flex-col justify-center">
              <span class="text-accent text-xs tracking-[0.2em] uppercase mb-4">{posts[0].category}</span>
              <h2 class="font-serif text-3xl md:text-4xl font-light mb-4 group-hover:text-accent transition-colors">{posts[0].title}</h2>
              <p class="text-text-muted mb-6">{posts[0].excerpt}</p>
              <div class="flex items-center justify-between">
                <span class="text-text-muted text-sm">{posts[0].date}</span>
                <span class="inline-flex items-center gap-2 text-sm text-accent">
                  Read <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M5 12h14M12 5l7 7-7 7" /></svg>
                </span>
              </div>
            </div>
          </div>
        </a>
      </article>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {posts.slice(1).map((post) => (
          <article class="post-card group opacity-0 translate-y-8" data-cursor="Read">
            <a href={`/blog/${post.slug}`} class="block">
              <div class="relative overflow-hidden aspect-[4/3] mb-6">
                <img src={post.image} alt={post.title} class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" />
                <div class="absolute top-4 left-4"><span class="bg-bg/80 backdrop-blur-sm px-3 py-1 text-xs tracking-wider uppercase">{post.category}</span></div>
              </div>
              <h3 class="font-serif text-xl md:text-2xl font-light mb-3 group-hover:text-accent transition-colors">{post.title}</h3>
              <p class="text-text-muted text-sm mb-4 line-clamp-2">{post.excerpt}</p>
              <span class="text-text-muted text-xs">{post.date}</span>
            </a>
          </article>
        ))}
      </div>
    </div>
  </section>
</Layout>

<style>.line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }</style>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("preloaderComplete", init);
  if (!document.getElementById("preloader") || document.getElementById("preloader")?.style.display === "none") init();

  function init() {
    gsap.to(".page-line", { y: 0, duration: 1, stagger: 0.1, ease: "power3.out" });
    gsap.to(".featured-post", { opacity: 1, y: 0, duration: 0.8, ease: "power3.out", delay: 0.4 });
    gsap.to(".featured-reveal", { scaleX: 0, transformOrigin: "right", duration: 1.2, ease: "power3.inOut", delay: 0.5 });
    gsap.utils.toArray<HTMLElement>(".post-card").forEach((card) => {
      gsap.to(card, { opacity: 1, y: 0, duration: 0.6, ease: "power3.out", scrollTrigger: { trigger: card, start: "top 85%" } });
    });
  }
</script>
