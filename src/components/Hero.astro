---
// Hero section with animated canvas background and featured image
---

<section id="hero" class="relative min-h-screen w-full overflow-hidden flex items-center">
  <!-- Animated Canvas Background -->
  <canvas id="hero-canvas" class="absolute inset-0 w-full h-full"></canvas>

  <!-- Gradient overlays -->
  <div class="absolute inset-0 bg-gradient-to-b from-bg/50 via-transparent to-bg pointer-events-none"></div>
  <div class="absolute inset-0 bg-gradient-to-r from-bg/30 via-transparent to-bg/30 pointer-events-none"></div>

  <!-- Content -->
  <div class="relative z-10 w-full px-8 md:px-16 lg:px-24 py-32">
    <div class="max-w-7xl mx-auto">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">

        <!-- Text Content -->
        <div class="order-2 lg:order-1 hero-content">
          <div class="overflow-hidden mb-6">
            <p class="hero-text text-accent text-sm md:text-base tracking-[0.4em] uppercase">
              Visual Artist & Creative
            </p>
          </div>

          <div class="overflow-hidden">
            <h1 class="font-serif text-5xl md:text-7xl lg:text-8xl xl:text-9xl font-light leading-[0.9] tracking-tight">
              <span class="block hero-text">First</span>
              <span class="block text-accent hero-text">Lastname</span>
            </h1>
          </div>

          <div class="overflow-hidden mt-8">
            <p class="hero-text text-text-muted text-lg md:text-xl font-light tracking-wide max-w-md">
              Exploring emotion through color and form
            </p>
          </div>

          <div class="mt-12">
            <a
              href="/portfolio"
              class="hero-text magnetic inline-flex items-center gap-3 text-text border border-text/30 px-8 py-4 hover:border-accent hover:text-accent transition-colors duration-500"
              data-cursor="View"
            >
              <span class="text-sm tracking-[0.2em] uppercase">Explore Portfolio</span>
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M5 12h14M12 5l7 7-7 7" />
              </svg>
            </a>
          </div>
        </div>

        <!-- Hero Image -->
        <div class="order-1 lg:order-2 relative hero-image-container">
          <div class="hero-image-wrapper relative">
            <!-- Decorative frame -->
            <div class="absolute -top-4 -right-4 w-full h-full border border-accent/30 hidden lg:block"></div>

            <!-- Main image container -->
            <div class="relative overflow-hidden aspect-[3/4] lg:aspect-[4/5]">
              <div class="hero-image-reveal absolute inset-0 bg-bg z-10"></div>
              <img
                src="https://picsum.photos/seed/heroartist/800/1000"
                alt="Artist portrait"
                class="hero-img w-full h-full object-cover"
                data-cursor="Artist"
              />
            </div>

            <!-- Floating accent elements -->
            <div class="absolute -bottom-6 -left-6 w-24 h-24 border border-accent/20 hidden lg:block"></div>
            <div class="absolute top-1/2 -left-12 hidden xl:block">
              <p class="hero-float-text text-8xl font-serif text-bg-light/30 font-light -rotate-90 origin-center">ART</p>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Scroll indicator -->
  <div class="scroll-indicator absolute bottom-12 left-1/2 -translate-x-1/2 flex flex-col items-center gap-3">
    <span class="text-text-muted text-xs tracking-[0.3em] uppercase">Scroll</span>
    <div class="w-px h-12 bg-text-muted/30 relative overflow-hidden">
      <div class="scroll-line absolute top-0 left-0 w-full h-1/2 bg-accent"></div>
    </div>
  </div>
</section>

<style>
  /* Hide elements initially */
  .hero-text {
    opacity: 0;
    transform: translateY(100%);
  }
  .hero-image-reveal {
    transform-origin: top;
  }
  .hero-img {
    transform: scale(1.1);
  }
  .hero-float-text {
    opacity: 0;
  }
  .scroll-indicator {
    opacity: 0;
  }
</style>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  // Canvas animation
  const canvas = document.getElementById("hero-canvas") as HTMLCanvasElement;
  const ctx = canvas.getContext("2d")!;

  let width = window.innerWidth;
  let height = window.innerHeight;
  let mouseX = width / 2;
  let mouseY = height / 2;

  canvas.width = width;
  canvas.height = height;

  class Particle {
    x: number;
    y: number;
    baseX: number;
    baseY: number;
    size: number;
    speed: number;
    angle: number;
    color: string;
    alpha: number;

    constructor() {
      this.x = Math.random() * width;
      this.y = Math.random() * height;
      this.baseX = this.x;
      this.baseY = this.y;
      this.size = Math.random() * 150 + 80;
      this.speed = Math.random() * 0.5 + 0.1;
      this.angle = Math.random() * Math.PI * 2;
      this.color = Math.random() > 0.5 ? "#c9a87c" : "#a68a5b";
      this.alpha = Math.random() * 0.12 + 0.03;
    }

    update() {
      this.angle += this.speed * 0.01;
      const dx = mouseX - this.x;
      const dy = mouseY - this.y;
      const dist = Math.sqrt(dx * dx + dy * dy);
      const maxDist = 400;

      if (dist < maxDist) {
        const force = (maxDist - dist) / maxDist;
        this.x -= (dx / dist) * force * 0.8;
        this.y -= (dy / dist) * force * 0.8;
      }

      this.x += (this.baseX + Math.cos(this.angle) * 60 - this.x) * 0.02;
      this.y += (this.baseY + Math.sin(this.angle) * 60 - this.y) * 0.02;
    }

    draw() {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fillStyle = this.color;
      ctx.globalAlpha = this.alpha;
      ctx.fill();
      ctx.globalAlpha = 1;
    }
  }

  const particles: Particle[] = [];
  for (let i = 0; i < 20; i++) {
    particles.push(new Particle());
  }

  function animate() {
    ctx.fillStyle = "#0a0a0a";
    ctx.fillRect(0, 0, width, height);
    ctx.filter = "blur(80px)";
    particles.forEach((p) => {
      p.update();
      p.draw();
    });
    ctx.filter = "none";
    requestAnimationFrame(animate);
  }

  animate();

  document.addEventListener("mousemove", (e) => {
    mouseX = e.clientX;
    mouseY = e.clientY;
  });

  window.addEventListener("resize", () => {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
  });

  // Hero animations
  let heroAnimated = false;

  function initHeroAnimations() {
    if (heroAnimated) return;
    heroAnimated = true;

    const tl = gsap.timeline();

    // Text animations
    tl.to(".hero-text", {
      y: 0,
      opacity: 1,
      duration: 1,
      stagger: 0.1,
      ease: "power3.out",
    })
    // Image reveal
    .to(".hero-image-reveal", {
      scaleY: 0,
      duration: 1.2,
      ease: "power3.inOut",
    }, "-=0.6")
    .to(".hero-img", {
      scale: 1,
      duration: 1.4,
      ease: "power2.out",
    }, "-=1")
    // Float text
    .to(".hero-float-text", {
      opacity: 1,
      duration: 0.8,
      ease: "power3.out",
    }, "-=0.6")
    // Scroll indicator
    .to(".scroll-indicator", {
      opacity: 1,
      duration: 0.6,
      ease: "power2.out",
    }, "-=0.4");

    // Scroll line animation
    gsap.to(".scroll-line", {
      y: "100%",
      duration: 1.5,
      ease: "power2.inOut",
      repeat: -1,
    });
  }

  // Listen for preloader complete
  document.addEventListener("preloaderComplete", initHeroAnimations);

  // Fallback if no preloader
  if (!document.getElementById("preloader")) {
    setTimeout(initHeroAnimations, 100);
  }

  // Parallax on scroll
  gsap.to(".hero-content", {
    yPercent: 20,
    ease: "none",
    scrollTrigger: {
      trigger: "#hero",
      start: "top top",
      end: "bottom top",
      scrub: true,
    },
  });

  gsap.to(".hero-img", {
    yPercent: -10,
    ease: "none",
    scrollTrigger: {
      trigger: "#hero",
      start: "top top",
      end: "bottom top",
      scrub: true,
    },
  });
</script>
