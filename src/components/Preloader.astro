---
// Preloader with elegant animation
---

<div id="preloader" class="fixed inset-0 z-[10001] bg-bg flex items-center justify-center">
  <div class="relative flex flex-col items-center">
    <div class="overflow-hidden">
      <h1 id="preloader-text" class="font-serif text-5xl md:text-7xl font-light tracking-wider translate-y-full">
        Artist Name
      </h1>
    </div>
    <div class="mt-4 overflow-hidden">
      <p id="preloader-subtitle" class="text-text-muted text-sm tracking-[0.3em] uppercase translate-y-full">
        Visual Artist
      </p>
    </div>
    <div class="mt-8 w-48 h-px bg-bg-light overflow-hidden">
      <div id="preloader-progress" class="h-full bg-accent w-0"></div>
    </div>
    <div class="mt-2 overflow-hidden">
      <span id="preloader-counter" class="text-text-muted text-xs font-mono translate-y-full inline-block">0%</span>
    </div>
  </div>

  <div id="preloader-cover" class="absolute inset-0 bg-bg translate-y-full"></div>
</div>

<script>
  import gsap from "gsap";

  const preloader = document.getElementById("preloader");
  const preloaderText = document.getElementById("preloader-text");
  const preloaderSubtitle = document.getElementById("preloader-subtitle");
  const preloaderProgress = document.getElementById("preloader-progress");
  const preloaderCounter = document.getElementById("preloader-counter");
  const preloaderCover = document.getElementById("preloader-cover");

  // Create timeline
  const tl = gsap.timeline();

  // Animate text in - faster!
  tl.to(preloaderText, {
    y: 0,
    duration: 0.6,
    ease: "power3.out",
    delay: 0.1,
  })
    .to(
      preloaderSubtitle,
      {
        y: 0,
        duration: 0.4,
        ease: "power3.out",
      },
      "-=0.3"
    )
    .to(
      preloaderCounter,
      {
        y: 0,
        duration: 0.3,
        ease: "power3.out",
      },
      "-=0.2"
    );

  // Animate progress bar - faster!
  const progressTl = gsap.timeline({ delay: 0.4 });

  progressTl.to(preloaderProgress, {
    width: "100%",
    duration: 1,
    ease: "power2.inOut",
    onUpdate: function () {
      const progress = Math.round(this.progress() * 100);
      if (preloaderCounter) preloaderCounter.textContent = `${progress}%`;
    },
  });

  // After loading, animate out
  progressTl.to(
    preloaderText,
    {
      y: "-100%",
      duration: 0.4,
      ease: "power3.in",
    },
    "+=0.1"
  );

  progressTl.to(
    [preloaderSubtitle, preloaderCounter],
    {
      y: "-100%",
      duration: 0.3,
      ease: "power3.in",
    },
    "-=0.3"
  );

  progressTl.to(
    preloaderCover,
    {
      y: 0,
      duration: 0.5,
      ease: "power3.inOut",
    },
    "-=0.1"
  );

  progressTl.to(preloader, {
    y: "-100%",
    duration: 0.5,
    ease: "power3.inOut",
    onComplete: () => {
      if (preloader) preloader.style.display = "none";
      // Trigger page animations
      document.dispatchEvent(new CustomEvent("preloaderComplete"));
    },
  });
</script>
