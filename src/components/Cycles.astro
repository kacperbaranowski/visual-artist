---
// Portfolio cycles grid section
const cycles = [
  { id: 1, title: "Light Series", count: 24, description: "Exploring the interplay of natural light and shadow across different times of day.", image: "https://picsum.photos/seed/cycle1/800/500", slug: "light-series" },
  { id: 2, title: "Seasons", count: 18, description: "A meditation on the cyclical nature of time through color and texture.", image: "https://picsum.photos/seed/cycle2/800/500", slug: "seasons" },
  { id: 3, title: "Elements", count: 22, description: "Raw expressions of earth, water, fire, and air in abstract form.", image: "https://picsum.photos/seed/cycle3/800/500", slug: "elements" },
  { id: 4, title: "Abstract", count: 20, description: "Pure emotion translated into form, color, and movement.", image: "https://picsum.photos/seed/cycle4/800/500", slug: "abstract" },
];
---

<section id="cycles" class="relative py-24 md:py-32 px-8 md:px-16 lg:px-24">
  <div class="mb-16 md:mb-24">
    <div class="overflow-hidden">
      <p class="cycle-line text-accent text-sm tracking-[0.3em] uppercase mb-4 translate-y-full">Explore</p>
    </div>
    <div class="overflow-hidden">
      <h2 class="cycle-line font-serif text-4xl md:text-5xl lg:text-6xl font-light translate-y-full">Art Collections</h2>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12">
    {cycles.map((cycle) => (
      <article class="cycle-item group relative" data-cursor="Discover">
        <a href={`/portfolio/${cycle.slug}`} class="block">
          <div class="relative overflow-hidden aspect-[16/10] mb-6">
            <div class="cycle-reveal absolute inset-0 bg-bg z-10" />
            <img src={cycle.image} alt={cycle.title} class="cycle-img w-full h-full object-cover transition-all duration-700 group-hover:scale-105 group-hover:brightness-75" />
            <div class="absolute inset-0 flex items-end p-6 md:p-8 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
              <p class="text-text text-sm md:text-base leading-relaxed max-w-md">{cycle.description}</p>
            </div>
            <div class="absolute top-6 right-6 w-12 h-12 rounded-full border border-text/30 flex items-center justify-center group-hover:bg-accent group-hover:border-accent transition-all duration-500">
              <span class="text-sm font-mono">{cycle.count}</span>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <h3 class="font-serif text-2xl md:text-3xl lg:text-4xl font-light group-hover:text-accent transition-colors duration-300">{cycle.title}</h3>
            <div class="w-10 h-10 rounded-full border border-text/20 flex items-center justify-center group-hover:border-accent group-hover:bg-accent transition-all duration-500 group-hover:translate-x-2">
              <svg class="w-4 h-4 transition-transform duration-500 group-hover:translate-x-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M5 12h14M12 5l7 7-7 7" />
              </svg>
            </div>
          </div>
        </a>
      </article>
    ))}
  </div>
</section>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  gsap.to(".cycle-line", { y: 0, duration: 1, stagger: 0.1, ease: "power3.out", scrollTrigger: { trigger: "#cycles", start: "top 70%", toggleActions: "play none none reverse" } });

  gsap.utils.toArray<HTMLElement>(".cycle-item").forEach((item) => {
    const reveal = item.querySelector(".cycle-reveal");
    const img = item.querySelector(".cycle-img");
    gsap.to(reveal, { scaleY: 0, transformOrigin: "bottom", duration: 1.2, ease: "power3.inOut", scrollTrigger: { trigger: item, start: "top 75%", toggleActions: "play none none reverse" } });
    gsap.to(img, { y: "-10%", ease: "none", scrollTrigger: { trigger: item, start: "top bottom", end: "bottom top", scrub: true } });
  });
</script>
